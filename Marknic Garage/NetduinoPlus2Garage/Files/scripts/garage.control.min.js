var garageManager=new function(){function t(n){return n.toLowerCase()==="true"?"Locked":"Unlocked"}function s(n,t){var i,r,u,f;if(n=n.toLowerCase(),t=t.toLowerCase(),i=n.substr(0,4),r=5,i==="soft")i="softlock",r=8;else if(i==="door"){r=4,u=t.substr(0,4);switch(u){case"open":t="open";break;case"clos":t="close";break;default:t="toggle"}}else i="light",t=t.substr(-2,2)=="on"?"on":"off";return f=Number(n.substr(r,1)),t=t.toLowerCase(),{component:i,componentNumber:f,command:t}}function r(n){return n.toLowerCase()==="true"?"Unlock":"Lock"}function u(n){return n.toLowerCase()==="on"?"On":"Off"}function f(n){return n.toLowerCase()==="on"?"Off":"On"}function e(n){switch(n){case"up":return"Door is Up";case"down":return"Door is Down"}return"Unknown"}function o(n){switch(n){case"down":return"Open";case"up":return"Close"}return"Toggle"}var n="",i=!0;return{updateStatusValues:function(){$.ajax({type:"GET",url:"/status",contentType:"application/json; charset=utf-8",dataType:"json",success:function(s){var c,h,l,a;if(n="",c=t(s.HardwareLock),i=!0,$("#garageCaption").text("Garage "+s.Name+" Status: "+t(s.Locked)),$("#hardwareLock").text(c),$("#softwareLock").text(t(s.SoftLock)),$("#softLock0").attr("value",r(s.SoftLock)),s.Door.length>0)for(h=0;h<s.Door.length;h++)l=o(s.Door[h].Status),$("#door"+h+"Status").text(e(s.Door[h].Status)),$("#door"+h).attr("value",l+" Door"),s.Door[h].Duration>20&&(s.Door[h].Status==="up"?n+='<p class="highlight-2"><strong>Notice:<\/strong> The garage door ('+s.Door[h].Name+") has been open for over 2 hours.<\/p>":s.Door[h].Status==="unknown"&&(n+='<p class="highlight-2"><strong>Notice:<\/strong> The garage door ('+s.Door[h].Name+") has been in an unknown state for over 2 hours.<\/p>"));if(s.Light.length>0)for(h=0;h<s.Light.length;h++)a=f(s.Light[h].Status),$("#light"+h+"Status").text(u(s.Light[h].Status)),$("#light"+h).attr("value","Turn "+a),s.Light[h].Duration>30&&s.Light[h].Status==="on"&&(n+='<p class="highlight-2"><strong>Notice:<\/strong> The lights ('+s.Light[h].Name+") has been on for over 2 hours.<\/p>");i&&(n+='<p class="highlight-3"><strong>Confirmation:<\/strong> All garage systems are active.<\/p>'),$("#alerts").html(n)},error:function(){i=!1,n+='<p class="highlight-1"><strong>Alert:<\/strong> Error: web service failed to respond.<\/p>',$("#alerts").html(n)}})},updateStatus:function(){$.ajax({type:"GET",url:"/status",contentType:"application/json; charset=utf-8",dataType:"json",success:function(h){var l="",y=t(h.HardwareLock),c,a,v;if(this.operational=!0,$("#garageCaption").text("Garage "+h.Name+" Status: "+t(h.Locked)),$("#statusTable").append("<tbody><tr><th>Lock<\/th><th>Status<\/th><th>Action<\/th><\/tr><\/tbody>"),l+='<tr><td>Hardware Lock<\/td><td><div id="hardwareLock">'+y+"<\/div><\/td><td>&nbsp;<\/td><\/tr>",l+='<tr><td>Soft Lock<\/td><td><div id="softwareLock">'+t(h.SoftLock)+'<\/div><\/td><td><input id="softLock0" type="button" value="'+r(h.SoftLock)+'" /><\/td><\/tr>',l+='<tr><th>Lock<\/th><th>Status<\/th><th>Action<\/th><\/tr><\/tr><tr><td colSpan="3">&nbsp;<\/td><\/tr>',l+="<tr><th>Door<\/th><th>Status<\/th><th>Action<\/th>",h.Door.length>0){for(c=0;c<h.Door.length;c++)a=o(h.Door[c].Status),l+="<tr><td>"+h.Door[c].Name+"<\/td><td><div id=door"+c+"Status>"+e(h.Door[c].Status)+'<\/div><\/td><td><input id="door'+c+'" type="button" value="'+a+' Door" /><\/td><\/tr>';l+='<tr><th>Door<\/th><th>Status<\/th><th>Action<\/th><\/tr><tr><td colSpan="3">&nbsp;<\/td><\/tr>'}if(h.Light.length>0){for(l+="<tr><th>Light<\/th><th>Status<\/th><th>Action<\/th><\/tr>",c=0;c<h.Light.length;c++)v=f(h.Light[c].Status),l+="<tr><td>"+h.Light[c].Name+"<\/td><td><div id=light"+c+"Status>"+u(h.Light[c].Status)+'<\/div><\/td><td><input id="light'+c+'" type="button" value="Turn '+v+'" /><\/td><\/tr>';l+="<tr><th>Light<\/th><th>Status<\/th><th>Action<\/th><\/tr>"}$("#statusTable tr:last").after(l),i&&(n+='<p class="highlight-3"><strong>Confirmation:<\/strong> All garage systems are active.<\/p>'),$("#alerts").html(n),$("input").click(function(){var n=JSON.stringify(s($(this).attr("id"),$(this).attr("value")));$.ajax({type:"POST",url:"/trigger",data:n,contentType:"application/json;charset=utf-8",dataType:"json",error:function(n){window.alert("Error:"+n.responseText+"  Status: "+n.status)}})})},error:function(){i=!1,n+='<p class="highlight-1"><strong>Alert:<\/strong> Error: web service failed to respond.<\/p>',$("#alerts").html(n)}})}}};$(document).ready(function(){window.setInterval("garageManager.updateStatusValues()",2e3),garageManager.updateStatus()});
//@ sourceMappingURL=garage.control.min.js.map